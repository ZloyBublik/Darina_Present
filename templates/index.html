<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/5/w3.css">
  <link rel="icon" type="image/x-icon" href="/static/icon.ico">
  <title><3</title>
  <style>
    @font-face {
      font-family: 'Fancy';
      src: url('fonts/fancy.ttf') format('truetype');
    }
    :root {
      --heart-color: #FFFFFF;   /* default = day */
    }
    body {
      margin: 0;
      height: 100vh;
      background-image: url('/static/background.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;

      font-family: 'Fancy', cursive;
      color: #ffcb4c;

      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 4rem;
    }

    .container {
      text-align: center; /* center all content inside */
    }

    hr {
      width: 50%;          /* smaller line */
      margin: 20px auto;   /* center it */
      border: 1px solid #ffcb4c;
      opacity: 0.7;
    }

    .topbar {
      position: fixed;           /* or use "sticky" if you want it to scroll then stick */
      top: 0;
      left: 0;
      width: 100%;
      height: 130px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      z-index: 1000;             /* keeps it above other content */
      box-sizing: border-box;
    }

    button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 20px 60px;              /* adjust padding to make it wider/shorter */

      font-size: 15px;
      font-weight: 900;                /* extra bold */
      letter-spacing: 1px;
      color: #abbabd;                  /* gold-yellow text */
      background: transparent;
      border: 3px solid #abbabd;       /* thick yellow border */
      border-radius: 50px;             /* pill shape */
      cursor: pointer;
      transition: all 0.25s ease;
      white-space: nowrap;
    }
    button:hover {
      box-shadow:
        0 0 20px #abbabd,
        0 0 40px #abbabd,
        0 0 70px rgb(171, 186, 189);
      transform: translateY(-3px);
    }

    .heart {
      position: fixed;
      left: 0;
      color: var(--heart-color);
      font-size: 30px;
      pointer-events: none;        /* doesn't block clicks */
      animation: fall linear forwards;
      z-index: 9999;
    }

    .w3-animate-opacity.crossed {
      text-decoration: line-through;
      text-decoration-color: #ff8181;
      animation: ease-in;
      animation-duration: auto;
    }

    @keyframes fall {
      to {
        transform: translateY(100vh);
        opacity: 0;
      }
    }

  </style>
</head>

<body>
  <div class = "topbar" >
    <button> Click Me! ❤︎ </button>
    <a><img src="https://i.ibb.co/VpksbTt3/cutie.png" alt="I <3 U" width=100vw></a>
    <button onclick="window.location.href='whosaidit'"> Play a game </button>

  </div>
  <div class="container">
    <div id="message">Please wait...</div>
    <hr>
    <div id="countdown" style="max-width: 70vw"></div>
    <hr>
    <div id="wish" style="font-size: 2rem; max-width: 30vw; margin: 0 auto" class="w3-animate-opacity"></div>
    <div id = "wish-2" style="font-size: 2rem; max-width: 30vw; margin: 0 auto" > </div>
  </div>


<script>
  function timeUntilValentines() {
    const now = new Date();
    const year = now.getFullYear();

    let valentines = new Date(year, 1, 14);

    if (now > valentines) {
      valentines = new Date(year + 1, 1, 14);
    }

    const diff = valentines - now;

    const days    = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours   = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((diff / (1000 * 60)) % 60);
    const seconds = Math.floor((diff / 1000) % 60);

    return { days, hours, minutes, seconds };
  }

  function updateCountdown() {
    const t = timeUntilValentines();
    document.getElementById("countdown").textContent =
      `${t.days} days, ${t.hours} hours, ${t.minutes} minutes and ${t.seconds} seconds`;
  }

  function updateBackground() {
    const now = new Date();
    const hours = now.getHours();          // 0–23

    if (hours >= 20 || hours < 6) {        // from 20:00 to 05:59 → night background
        document.body.style.backgroundImage = "url('/static/night_bg.png')";
        document.body.style.color = "#abbabd";
        document.querySelectorAll('hr').forEach(hr => {
            hr.style.borderColor = '#abbabd';     // or a darker pink for night if you prefer
            hr.style.opacity = '0.9';
        });
        document.documentElement.style.setProperty('--heart-color', "#abbabd");

    } else {                               // day background
        document.body.style.backgroundImage = "url('/static/background.png')";
        document.body.style.color = "#ffcb4c";
        document.querySelectorAll('hr').forEach(hr => {
            hr.style.borderColor = '#ffcb4c';     // or a darker pink for night if you prefer
            hr.style.opacity = '0.9';
        });
        document.querySelectorAll("button").forEach(button => {
          button.style.color = "#6e4f00"
          button.style.border = "3px solid #6e4f00"
        });
        document.documentElement.style.setProperty('--heart-color', "#ffcb4c");

    }
  }

  document.querySelector('button').addEventListener('click', function(e) {
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.textContent = '♡';

    heart.style.left = (e.clientX - 15 +Math.random() * 45) + 'px';
    heart.style.top  = (e.clientY - 15) + 'px';

    heart.style.animationDuration = (2 + Math.random() * 2) + 's';

    document.body.appendChild(heart);

    heart.addEventListener('animationend', () => heart.remove());
  });

  const messages = ["Last day of school yayy!! Please video call me on the holidays, I'll miss seeing you :( ❤︎", "Dude pls tell me we got to hang out and ur mum didn't say no", "Guess who is flying to Latvia today woohoo (no, not excited)",
    "Already miss seeing you :( maybe send me a cute selfie? Ugh it'll be cute either way lol", "Want to call and revise for bio together? Or just call maybe?", "You know I just realised I'll write a total of 70 messages until valentines... what this website turns into after is a secret", "Merry Christmas!!! I know you don't celebrate but still"
    ];
  const day = new Date().getDate();
  document.getElementById("wish").textContent = messages[day-19];
  setInterval(updateCountdown, 1000);
  setInterval(updateBackground, 60000);
  updateBackground();
  updateCountdown();
</script>

</body>
</html>
